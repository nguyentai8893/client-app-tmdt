{"ast":null,"code":"import React,{useState}from'react';import{useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import classNames from'classnames/bind';import styles from'./DetailPage.module.scss';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCaretLeft,faCaretRight}from'@fortawesome/free-solid-svg-icons';import RelatedProducts from'./RelatedProducts';import useAxios from'../hook/useAxios';import{productAction}from'../store/productSlice';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const cx=classNames.bind(styles);const apiUrl=process.env.REACT_APP_API_URL;const DetailPage=()=>{const{id}=useParams();const[inputValue,setInputValue]=useState(1);const products=useSelector(state=>state.product.products);const currentCategory=useSelector(state=>state.product.currentCategory);const user=JSON.parse(localStorage.getItem('user'))||[];const{apiRequest}=useAxios();const dispatch=useDispatch();const product=products.find(product=>product._id===id);const relatedProducts=currentCategory==='All'?products:products.filter(fil=>fil.category===currentCategory);const handlerDecremen=()=>{if(inputValue>1){setInputValue(inputValue-1);}};const handlerIncremen=()=>{setInputValue(inputValue+1);};// sử lý khi clik nút add cart\nconst handlerAddCart=async()=>{const postData={userId:user._id,product,quantity:inputValue};const res=await apiRequest(\"\".concat(apiUrl,\"/api/add-cart\"),'post',postData);if(res.status==200){dispatch(productAction.cartItem(res.userCart));}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:cx('container'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('container-product'),children:[/*#__PURE__*/_jsx(\"div\",{className:cx('image'),children:/*#__PURE__*/_jsx(\"img\",{alt:\"product\",src:product===null||product===void 0?void 0:product.img1})}),/*#__PURE__*/_jsxs(\"div\",{className:cx('text'),children:[/*#__PURE__*/_jsx(\"h4\",{children:product===null||product===void 0?void 0:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:cx('price'),children:[product===null||product===void 0?void 0:product.price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,'.'),' ',\"VND\"]}),/*#__PURE__*/_jsx(\"p\",{className:cx('long-dec'),children:product===null||product===void 0?void 0:product.short_desc}),/*#__PURE__*/_jsxs(\"div\",{className:cx('dflex'),children:[\"CATEGORY: \",/*#__PURE__*/_jsx(\"p\",{children:product===null||product===void 0?void 0:product.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('container-btn'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"QUANTITY\"}),/*#__PURE__*/_jsxs(\"div\",{className:cx('flex-icon'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{className:cx('icon'),onClick:handlerDecremen,icon:faCaretLeft}),/*#__PURE__*/_jsx(\"p\",{children:inputValue}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:cx('icon'),onClick:handlerIncremen,icon:faCaretRight})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlerAddCart(),children:\"Add to cart\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:cx('related-product'),children:[/*#__PURE__*/_jsx(\"button\",{children:\"DESCRIPTION\"}),/*#__PURE__*/_jsx(\"p\",{className:cx('related-long_desc'),children:product===null||product===void 0?void 0:product.long_desc}),/*#__PURE__*/_jsxs(\"div\",{className:cx('container-related'),children:[/*#__PURE__*/_jsx(\"p\",{className:cx('related-title'),children:\"RELATED PRODUCTS\"}),/*#__PURE__*/_jsx(\"div\",{className:cx('related'),children:relatedProducts.map((item,index)=>{return/*#__PURE__*/_jsx(RelatedProducts,{item:item},index);})})]})]})]})});};export default DetailPage;","map":{"version":3,"names":["React","useState","useParams","useDispatch","useSelector","classNames","styles","FontAwesomeIcon","faCaretLeft","faCaretRight","RelatedProducts","useAxios","productAction","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","cx","bind","apiUrl","process","env","REACT_APP_API_URL","DetailPage","id","inputValue","setInputValue","products","state","product","currentCategory","user","JSON","parse","localStorage","getItem","apiRequest","dispatch","find","_id","relatedProducts","filter","fil","category","handlerDecremen","handlerIncremen","handlerAddCart","postData","userId","quantity","res","concat","status","cartItem","userCart","children","className","alt","src","img1","name","price","toString","replace","short_desc","type","placeholder","onClick","icon","long_desc","map","item","index"],"sources":["D:/learning/nodejsFNX/asm3-nodejs_NJS301x/asm3-react/src/components/DetailPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport classNames from 'classnames/bind';\r\nimport styles from './DetailPage.module.scss';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons';\r\nimport RelatedProducts from './RelatedProducts';\r\nimport useAxios from '../hook/useAxios';\r\nimport { productAction } from '../store/productSlice';\r\nconst cx = classNames.bind(styles);\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nconst DetailPage = () => {\r\n\tconst { id } = useParams();\r\n\tconst [inputValue, setInputValue] = useState(1);\r\n\tconst products = useSelector((state) => state.product.products);\r\n\tconst currentCategory = useSelector((state) => state.product.currentCategory);\r\n\tconst user = JSON.parse(localStorage.getItem('user')) || [];\r\n\tconst { apiRequest } = useAxios();\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst product = products.find((product) => product._id === id);\r\n\tconst relatedProducts =\r\n\t\tcurrentCategory === 'All'\r\n\t\t\t? products\r\n\t\t\t: products.filter((fil) => fil.category === currentCategory);\r\n\r\n\tconst handlerDecremen = () => {\r\n\t\tif (inputValue > 1) {\r\n\t\t\tsetInputValue(inputValue - 1);\r\n\t\t}\r\n\t};\r\n\tconst handlerIncremen = () => {\r\n\t\tsetInputValue(inputValue + 1);\r\n\t};\r\n\t// sử lý khi clik nút add cart\r\n\tconst handlerAddCart = async () => {\r\n\t\tconst postData = {\r\n\t\t\tuserId: user._id,\r\n\t\t\tproduct,\r\n\t\t\tquantity: inputValue,\r\n\t\t};\r\n\t\tconst res = await apiRequest(`${apiUrl}/api/add-cart`, 'post', postData);\r\n\t\tif (res.status == 200) {\r\n\t\t\tdispatch(productAction.cartItem(res.userCart));\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={cx('container')}>\r\n\t\t\t\t<div className={cx('container-product')}>\r\n\t\t\t\t\t<div className={cx('image')}>\r\n\t\t\t\t\t\t<img alt='product' src={product?.img1} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={cx('text')}>\r\n\t\t\t\t\t\t<h4>{product?.name}</h4>\r\n\t\t\t\t\t\t<p className={cx('price')}>\r\n\t\t\t\t\t\t\t{product?.price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.')}{' '}\r\n\t\t\t\t\t\t\tVND\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className={cx('long-dec')}>{product?.short_desc}</p>\r\n\t\t\t\t\t\t<div className={cx('dflex')}>\r\n\t\t\t\t\t\t\tCATEGORY: <p>{product?.category}</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className={cx('container-btn')}>\r\n\t\t\t\t\t\t\t<input type='text' placeholder='QUANTITY' />\r\n\t\t\t\t\t\t\t<div className={cx('flex-icon')}>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\t\tclassName={cx('icon')}\r\n\t\t\t\t\t\t\t\t\tonClick={handlerDecremen}\r\n\t\t\t\t\t\t\t\t\ticon={faCaretLeft}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<p>{inputValue}</p>\r\n\t\t\t\t\t\t\t\t<FontAwesomeIcon\r\n\t\t\t\t\t\t\t\t\tclassName={cx('icon')}\r\n\t\t\t\t\t\t\t\t\tonClick={handlerIncremen}\r\n\t\t\t\t\t\t\t\t\ticon={faCaretRight}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button onClick={() => handlerAddCart()}>Add to cart</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={cx('related-product')}>\r\n\t\t\t\t\t<button>DESCRIPTION</button>\r\n\t\t\t\t\t<p className={cx('related-long_desc')}>{product?.long_desc}</p>\r\n\r\n\t\t\t\t\t<div className={cx('container-related')}>\r\n\t\t\t\t\t\t<p className={cx('related-title')}>RELATED PRODUCTS</p>\r\n\t\t\t\t\t\t<div className={cx('related')}>\r\n\t\t\t\t\t\t\t{relatedProducts.map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn <RelatedProducts item={item} key={index} />;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default DetailPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}