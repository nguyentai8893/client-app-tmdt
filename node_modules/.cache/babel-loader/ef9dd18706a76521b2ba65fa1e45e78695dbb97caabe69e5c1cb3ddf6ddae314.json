{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';const initialState={currentCategory:'All',products:[],productCart:[],quantity:0,cartState:[],orderState:[],selectedProducts:[]};// tạo slice product\nconst productSlice=createSlice({name:'product-category',initialState,reducers:{setCategory(state,action){state.currentCategory=action.payload;},setProduct(state,action){state.products=action.payload;localStorage.setItem('products',JSON.stringify(action.payload));},productQuantity(state,action){state.productCart=action.payload.product;state.quantity=action.payload.quantity;},decremenHandler(state,action){const product=action.payload.product;if(product){product.quantity-=1;state.productCart=product;}},incremenHandler(state,action){const product=action.payload;if(product){product.quantity+=1;state.productCart=product;}},updateCartItemQuantity(state,action){const{idProduct,quantity}=action.payload;const productIndex=state.cartState.findIndex(item=>item.idProduct===idProduct);if(productIndex!==-1){state.cartState[productIndex].quantity=quantity;}},removeItem(state,action){state.productCart=action.payload;},cartItem(state,action){localStorage.setItem('cartItems',JSON.stringify(action.payload));state.cartState=action.payload;},removeCartState(state,action){state.cartState=[];},order(state,action){state.orderState=action.payload;localStorage.setItem('order',JSON.stringify(action.payload));},ressetState(state){state.cartState=[];state.orderState=[];state.products=[];},selectProduct(state,action){const productId=action.payload;const index=state.selectedProducts.indexOf(productId);if(index===-1){// Thêm id của sản phẩm vào danh sách nếu không tồn tại\nstate.selectedProducts.push(productId);}else{// Loại bỏ id của sản phẩm khỏi danh sách nếu đã tồn tại\nstate.selectedProducts.splice(index,1);}// Lưu trạng thái của các sản phẩm đã chọn vào local storage\nlocalStorage.setItem('selectedProducts',JSON.stringify(state.selectedProducts));}}});export const productAction=productSlice.actions;export default productSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","currentCategory","products","productCart","quantity","cartState","orderState","selectedProducts","productSlice","name","reducers","setCategory","state","action","payload","setProduct","localStorage","setItem","JSON","stringify","productQuantity","product","decremenHandler","incremenHandler","updateCartItemQuantity","idProduct","productIndex","findIndex","item","removeItem","cartItem","removeCartState","order","ressetState","selectProduct","productId","index","indexOf","push","splice","productAction","actions","reducer"],"sources":["D:/learning/nodejsFNX/asm3-nodejs_NJS301x/asm3-react/src/store/productSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nconst initialState = {\r\n\tcurrentCategory: 'All',\r\n\tproducts: [],\r\n\tproductCart: [],\r\n\tquantity: 0,\r\n\tcartState: [],\r\n\torderState: [],\r\n\r\n\tselectedProducts: [],\r\n};\r\n\r\n// tạo slice product\r\nconst productSlice = createSlice({\r\n\tname: 'product-category',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetCategory(state, action) {\r\n\t\t\tstate.currentCategory = action.payload;\r\n\t\t},\r\n\t\tsetProduct(state, action) {\r\n\t\t\tstate.products = action.payload;\r\n\t\t\tlocalStorage.setItem('products', JSON.stringify(action.payload));\r\n\t\t},\r\n\t\tproductQuantity(state, action) {\r\n\t\t\tstate.productCart = action.payload.product;\r\n\t\t\tstate.quantity = action.payload.quantity;\r\n\t\t},\r\n\t\tdecremenHandler(state, action) {\r\n\t\t\tconst product = action.payload.product;\r\n\t\t\tif (product) {\r\n\t\t\t\tproduct.quantity -= 1;\r\n\t\t\t\tstate.productCart = product;\r\n\t\t\t}\r\n\t\t},\r\n\t\tincremenHandler(state, action) {\r\n\t\t\tconst product = action.payload;\r\n\t\t\tif (product) {\r\n\t\t\t\tproduct.quantity += 1;\r\n\t\t\t\tstate.productCart = product;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateCartItemQuantity(state, action) {\r\n\t\t\tconst { idProduct, quantity } = action.payload;\r\n\t\t\tconst productIndex = state.cartState.findIndex(\r\n\t\t\t\t(item) => item.idProduct === idProduct\r\n\t\t\t);\r\n\t\t\tif (productIndex !== -1) {\r\n\t\t\t\tstate.cartState[productIndex].quantity = quantity;\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveItem(state, action) {\r\n\t\t\tstate.productCart = action.payload;\r\n\t\t},\r\n\t\tcartItem(state, action) {\r\n\t\t\tlocalStorage.setItem('cartItems', JSON.stringify(action.payload));\r\n\t\t\tstate.cartState = action.payload;\r\n\t\t},\r\n\t\tremoveCartState(state, action) {\r\n\t\t\tstate.cartState = [];\r\n\t\t},\r\n\t\torder(state, action) {\r\n\t\t\tstate.orderState = action.payload;\r\n\t\t\tlocalStorage.setItem('order', JSON.stringify(action.payload));\r\n\t\t},\r\n\t\tressetState(state) {\r\n\t\t\tstate.cartState = [];\r\n\t\t\tstate.orderState = [];\r\n\t\t\tstate.products = [];\r\n\t\t},\r\n\t\tselectProduct(state, action) {\r\n\t\t\tconst productId = action.payload;\r\n\t\t\tconst index = state.selectedProducts.indexOf(productId);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\t// Thêm id của sản phẩm vào danh sách nếu không tồn tại\r\n\t\t\t\tstate.selectedProducts.push(productId);\r\n\t\t\t} else {\r\n\t\t\t\t// Loại bỏ id của sản phẩm khỏi danh sách nếu đã tồn tại\r\n\t\t\t\tstate.selectedProducts.splice(index, 1);\r\n\t\t\t}\r\n\t\t\t// Lưu trạng thái của các sản phẩm đã chọn vào local storage\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'selectedProducts',\r\n\t\t\t\tJSON.stringify(state.selectedProducts)\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const productAction = productSlice.actions;\r\nexport default productSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}