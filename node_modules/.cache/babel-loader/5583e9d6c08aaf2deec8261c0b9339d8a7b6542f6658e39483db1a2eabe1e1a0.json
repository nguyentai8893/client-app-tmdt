{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  currentCategory: 'All',\n  products: [],\n  productCart: [],\n  quantity: 0,\n  cartState: [],\n  orderState: [],\n  selectedProducts: []\n};\n\n// tạo slice product\nconst productSlice = createSlice({\n  name: 'product-category',\n  initialState,\n  reducers: {\n    setCategory(state, action) {\n      state.currentCategory = action.payload;\n    },\n    setProduct(state, action) {\n      state.products = action.payload;\n      localStorage.setItem('products', JSON.stringify(action.payload));\n    },\n    productQuantity(state, action) {\n      state.productCart = action.payload.product;\n      state.quantity = action.payload.quantity;\n    },\n    decremenHandler(state, action) {\n      const product = action.payload.product;\n      if (product) {\n        product.quantity -= 1;\n        state.productCart = product;\n      }\n    },\n    incremenHandler(state, action) {\n      const product = action.payload;\n      if (product) {\n        product.quantity += 1;\n        state.productCart = product;\n      }\n    },\n    updateCartItemQuantity(state, action) {\n      const {\n        idProduct,\n        quantity\n      } = action.payload;\n      const productIndex = state.cartState.findIndex(item => item.idProduct === idProduct);\n      if (productIndex !== -1) {\n        state.cartState[productIndex].quantity = quantity;\n      }\n    },\n    removeItem(state, action) {\n      state.productCart = action.payload;\n    },\n    cartItem(state, action) {\n      localStorage.setItem('cartItems', JSON.stringify(action.payload));\n      state.cartState = action.payload;\n    },\n    removeCartState(state, action) {\n      state.cartState = [];\n    },\n    order(state, action) {\n      state.orderState = action.payload;\n      localStorage.setItem('order', JSON.stringify(action.payload));\n    },\n    ressetState(state) {\n      state.cartState = [];\n      state.orderState = [];\n      state.products = [];\n    },\n    selectProduct(state, action) {\n      const productId = action.payload;\n      const index = state.selectedProducts.indexOf(productId);\n      if (index === -1) {\n        // Thêm id của sản phẩm vào danh sách nếu không tồn tại\n        state.selectedProducts.push(productId);\n      } else {\n        // Loại bỏ id của sản phẩm khỏi danh sách nếu đã tồn tại\n        state.selectedProducts.splice(index, 1);\n      }\n      // Lưu trạng thái của các sản phẩm đã chọn vào local storage\n      localStorage.setItem('selectedProducts', JSON.stringify(state.selectedProducts));\n    }\n  }\n});\nexport const productAction = productSlice.actions;\nexport default productSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","currentCategory","products","productCart","quantity","cartState","orderState","selectedProducts","productSlice","name","reducers","setCategory","state","action","payload","setProduct","localStorage","setItem","JSON","stringify","productQuantity","product","decremenHandler","incremenHandler","updateCartItemQuantity","idProduct","productIndex","findIndex","item","removeItem","cartItem","removeCartState","order","ressetState","selectProduct","productId","index","indexOf","push","splice","productAction","actions","reducer"],"sources":["D:/learning/nodejsFNX/asm3-nodejs_NJS301x/asm3-react/src/store/productSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nconst initialState = {\r\n\tcurrentCategory: 'All',\r\n\tproducts: [],\r\n\tproductCart: [],\r\n\tquantity: 0,\r\n\tcartState: [],\r\n\torderState: [],\r\n\r\n\tselectedProducts: [],\r\n};\r\n\r\n// tạo slice product\r\nconst productSlice = createSlice({\r\n\tname: 'product-category',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetCategory(state, action) {\r\n\t\t\tstate.currentCategory = action.payload;\r\n\t\t},\r\n\t\tsetProduct(state, action) {\r\n\t\t\tstate.products = action.payload;\r\n\t\t\tlocalStorage.setItem('products', JSON.stringify(action.payload));\r\n\t\t},\r\n\t\tproductQuantity(state, action) {\r\n\t\t\tstate.productCart = action.payload.product;\r\n\t\t\tstate.quantity = action.payload.quantity;\r\n\t\t},\r\n\t\tdecremenHandler(state, action) {\r\n\t\t\tconst product = action.payload.product;\r\n\t\t\tif (product) {\r\n\t\t\t\tproduct.quantity -= 1;\r\n\t\t\t\tstate.productCart = product;\r\n\t\t\t}\r\n\t\t},\r\n\t\tincremenHandler(state, action) {\r\n\t\t\tconst product = action.payload;\r\n\t\t\tif (product) {\r\n\t\t\t\tproduct.quantity += 1;\r\n\t\t\t\tstate.productCart = product;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateCartItemQuantity(state, action) {\r\n\t\t\tconst { idProduct, quantity } = action.payload;\r\n\t\t\tconst productIndex = state.cartState.findIndex(\r\n\t\t\t\t(item) => item.idProduct === idProduct\r\n\t\t\t);\r\n\t\t\tif (productIndex !== -1) {\r\n\t\t\t\tstate.cartState[productIndex].quantity = quantity;\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveItem(state, action) {\r\n\t\t\tstate.productCart = action.payload;\r\n\t\t},\r\n\t\tcartItem(state, action) {\r\n\t\t\tlocalStorage.setItem('cartItems', JSON.stringify(action.payload));\r\n\t\t\tstate.cartState = action.payload;\r\n\t\t},\r\n\t\tremoveCartState(state, action) {\r\n\t\t\tstate.cartState = [];\r\n\t\t},\r\n\t\torder(state, action) {\r\n\t\t\tstate.orderState = action.payload;\r\n\t\t\tlocalStorage.setItem('order', JSON.stringify(action.payload));\r\n\t\t},\r\n\t\tressetState(state) {\r\n\t\t\tstate.cartState = [];\r\n\t\t\tstate.orderState = [];\r\n\t\t\tstate.products = [];\r\n\t\t},\r\n\t\tselectProduct(state, action) {\r\n\t\t\tconst productId = action.payload;\r\n\t\t\tconst index = state.selectedProducts.indexOf(productId);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\t// Thêm id của sản phẩm vào danh sách nếu không tồn tại\r\n\t\t\t\tstate.selectedProducts.push(productId);\r\n\t\t\t} else {\r\n\t\t\t\t// Loại bỏ id của sản phẩm khỏi danh sách nếu đã tồn tại\r\n\t\t\t\tstate.selectedProducts.splice(index, 1);\r\n\t\t\t}\r\n\t\t\t// Lưu trạng thái của các sản phẩm đã chọn vào local storage\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t'selectedProducts',\r\n\t\t\t\tJSON.stringify(state.selectedProducts)\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const productAction = productSlice.actions;\r\nexport default productSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}