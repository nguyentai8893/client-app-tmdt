{"ast":null,"code":"import React,{useState}from'react';import classNames from'classnames/bind';import styles from'./SigninPage.module.scss';import{Link,useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{loginAction}from'../store/loginUserSlice';import useAxios from'../hook/useAxios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const cx=classNames.bind(styles);const apiUrl=process.env.REACT_APP_API_URL;const SigninPage=()=>{const dispatch=useDispatch();const navigate=useNavigate();const[err,setErr]=useState('');const[postData,setPotData]=useState({email:'',password:''});const{apiRequest}=useAxios();const handlerSignIn=async()=>{try{const res=await apiRequest(\"\".concat(apiUrl,\"/api/login\"),'post',postData);if(res.status===false){setErr(res.message);}if(res.user.role==='guest'){dispatch(loginAction.onLogin(res.user));navigate('/');}}catch(error){console.log(error);}};const handleChange=async e=>{e.preventDefault();setPotData({...postData,[e.target.name]:e.target.value});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:cx('container'),children:/*#__PURE__*/_jsxs(\"div\",{className:cx('container-form'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"div\",{className:cx('form'),children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"email\",placeholder:\"Email\",type:\"email\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,name:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),err&&/*#__PURE__*/_jsx(\"span\",{className:cx('err'),children:err}),/*#__PURE__*/_jsx(\"button\",{className:cx('btn'),onClick:handlerSignIn,children:\"Sign IN\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Create an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Click\"})]})]})]})})});};export default SigninPage;","map":{"version":3,"names":["React","useState","classNames","styles","Link","useNavigate","useDispatch","loginAction","useAxios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","cx","bind","apiUrl","process","env","REACT_APP_API_URL","SigninPage","dispatch","navigate","err","setErr","postData","setPotData","email","password","apiRequest","handlerSignIn","res","concat","status","message","user","role","onLogin","error","console","log","handleChange","e","preventDefault","target","name","value","children","className","onChange","placeholder","type","onClick","to"],"sources":["D:/learning/nodejsFNX/asm3-nodejs_NJS301x/asm3-react/src/components/SigninPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport styles from './SigninPage.module.scss';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { loginAction } from '../store/loginUserSlice';\r\nimport useAxios from '../hook/useAxios';\r\n\r\nconst cx = classNames.bind(styles);\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nconst SigninPage = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst navigate = useNavigate();\r\n\tconst [err, setErr] = useState('');\r\n\tconst [postData, setPotData] = useState({\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t});\r\n\r\n\tconst { apiRequest } = useAxios();\r\n\tconst handlerSignIn = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await apiRequest(`${apiUrl}/api/login`, 'post', postData);\r\n\t\t\tif (res.status === false) {\r\n\t\t\t\tsetErr(res.message);\r\n\t\t\t}\r\n\t\t\tif (res.user.role === 'guest') {\r\n\t\t\t\tdispatch(loginAction.onLogin(res.user));\r\n\t\t\t\tnavigate('/');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t};\r\n\tconst handleChange = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetPotData({\r\n\t\t\t...postData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={cx('container')}>\r\n\t\t\t\t<div className={cx('container-form')}>\r\n\t\t\t\t\t<h3>Sign In</h3>\r\n\t\t\t\t\t<div className={cx('form')}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tname='email'\r\n\t\t\t\t\t\t\tplaceholder='Email'\r\n\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tname='password'\r\n\t\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t{/* {error.passValue && (\r\n\t\t\t\t\t\t\t<p style={{ color: 'red' }}>{error.passValue}</p>\r\n\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t{err && <span className={cx('err')}>{err}</span>}\r\n\t\t\t\t\t\t<button className={cx('btn')} onClick={handlerSignIn}>\r\n\t\t\t\t\t\t\tSign IN\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tCreate an account? <Link to='/register'>Click</Link>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default SigninPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}